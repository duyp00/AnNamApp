<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/annamapp/navigation/AppNavHost.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/annamapp/navigation/AppNavHost.kt" />
              <option name="originalContent" value="package com.example.annamapp.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Modifier&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.toRoute&#10;import com.example.annamapp.room_sqlite_db.FlashCard&#10;import com.example.annamapp.room_sqlite_db.FlashCardDao&#10;import com.example.annamapp.screens.AddCardScreen&#10;import com.example.annamapp.screens.CardDetailScreen&#10;import com.example.annamapp.screens.HomeScreen&#10;import com.example.annamapp.screens.SearchScreen&#10;import com.example.annamapp.screens.StudyScreen&#10;import com.example.annamapp.screens.SearchResultScreen&#10;&#10;@Composable&#10;fun AppNavHost(&#10;    flashCardDao: FlashCardDao,&#10;    navCtrller: NavHostController = rememberNavController(),&#10;    modder: Modifier,&#10;    // The start destination is now a type-safe object, not a String&#10;    startDestnt: Routes, //= Routes.Home,&#10;    onMessageChange: (String) -&gt; Unit = {}&#10;) {&#10;    // Define lambdas for database operations.&#10;    val insertFlashCard: suspend (FlashCard) -&gt; Unit = {&#10;        flashCardDao.insertAll(it)&#10;    }&#10;    val updateFlashCard: suspend (FlashCard) -&gt; Unit = {&#10;        flashCardDao.updateCard(it)&#10;    }&#10;    val getAllCards: suspend () -&gt; List&lt;FlashCard&gt; = {&#10;        flashCardDao.getAll()&#10;    }&#10;    val getCardById: suspend (Int?) -&gt; FlashCard? = {&#10;        flashCardDao.getCardById(it)&#10;    }&#10;    val deleteCard: suspend (FlashCard) -&gt; Unit = {&#10;        flashCardDao.delete(it)&#10;    }&#10;&#10;    // The startDestination parameter now takes the Routes.Home object directly&#10;    NavHost(navController = navCtrller, startDestination = startDestnt, modifier = modder) {&#10;&#10;        // Use composable&lt;T&gt; for type-safe destinations without arguments&#10;        composable&lt;Routes.Home&gt; {&#10;            HomeScreen(&#10;                // Navigate by passing the destination object&#10;                onNavigateToStudy = { navCtrller.navigate(Routes.Study) },&#10;                onNavigateToAdd = { navCtrller.navigate(Routes.Add) },&#10;                onNavigateToSearch = { navCtrller.navigate(Routes.Search) },&#10;                onMessageChange = onMessageChange&#10;            )&#10;        }&#10;&#10;        composable&lt;Routes.Study&gt; {&#10;            StudyScreen(onMessageChange = onMessageChange)&#10;        }&#10;&#10;        composable&lt;Routes.Add&gt; {&#10;            AddCardScreen(onMessageChange = onMessageChange, insertFlashCard = insertFlashCard)&#10;        }&#10;&#10;        composable&lt;Routes.Search&gt; {&#10;            SearchScreen(&#10;                onSearch = { filters -&gt; navCtrller.navigate(filters) },&#10;                onShowAllCards = { navCtrller.navigate(Routes.SearchResults()) },&#10;                onMessageChange = onMessageChange&#10;            )&#10;        }&#10;&#10;        composable&lt;Routes.SearchResults&gt; { backStackEntry -&gt;&#10;            val args = backStackEntry.toRoute&lt;Routes.SearchResults&gt;()&#10;            SearchResultScreen(&#10;                filters = args,&#10;                performSearch = { filters -&gt;&#10;                    val englishQuery = filters.englishQuery&#10;                    val vietnameseQuery = filters.vietnameseQuery&#10;                    val list = if (filters.englishEnabled || filters.vietnameseEnabled) {&#10;                        flashCardDao.searchCards(&#10;                            englishQuery = englishQuery,&#10;                            englishEnabled = filters.englishEnabled,&#10;                            englishWholeWord = filters.englishWholeWord,&#10;                            vietnameseQuery = vietnameseQuery,&#10;                            vietnameseEnabled = filters.vietnameseEnabled,&#10;                            vietnameseWholeWord = filters.vietnameseWholeWord&#10;                        )&#10;                    } else {&#10;                        flashCardDao.getAll()&#10;                    }&#10;                    list&#10;                },&#10;                onNavigateToCard = { cardId -&gt; navCtrller.navigate(Routes.CardDetail(cardId)) },&#10;                onMessageChange = onMessageChange&#10;            )&#10;        }&#10;&#10;        // Use composable&lt;T&gt; for destinations WITH arguments&#10;        composable&lt;Routes.CardDetail&gt; { backStackEntry -&gt;&#10;            // Retrieve the type-safe arguments object&#10;            val args = backStackEntry.toRoute&lt;Routes.CardDetail&gt;()&#10;&#10;            CardDetailScreen(&#10;                getCardById = getCardById,&#10;                updateCard = updateFlashCard,&#10;                //deleteCard = deleteCard,&#10;                cardId = args.cardId, // Access arguments directly&#10;                //onNavigateBack = { navCtrller.popBackStack() },&#10;                onMessageChange = onMessageChange&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.annamapp.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Modifier&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.toRoute&#10;import com.example.annamapp.room_sqlite_db.FlashCard&#10;import com.example.annamapp.room_sqlite_db.FlashCardDao&#10;import com.example.annamapp.screens.AddCardScreen&#10;import com.example.annamapp.screens.CardDetailScreen&#10;import com.example.annamapp.screens.HomeScreen&#10;import com.example.annamapp.screens.SearchScreen&#10;import com.example.annamapp.screens.StudyScreen&#10;import com.example.annamapp.screens.SearchResultScreen&#10;&#10;@Composable&#10;fun AppNavHost(&#10;    flashCardDao: FlashCardDao,&#10;    navCtrller: NavHostController = rememberNavController(),&#10;    modder: Modifier,&#10;    // The start destination is now a type-safe object, not a String&#10;    startDestnt: Routes, //= Routes.Home,&#10;    onMessageChange: (String) -&gt; Unit = {}&#10;) {&#10;    // Define lambdas for database operations.&#10;    val insertFlashCard: suspend (FlashCard) -&gt; Unit = {&#10;        flashCardDao.insertAll(it)&#10;    }&#10;    val updateFlashCard: suspend (FlashCard) -&gt; Unit = {&#10;        flashCardDao.updateCard(it)&#10;    }&#10;    val getAllCards: suspend () -&gt; List&lt;FlashCard&gt; = {&#10;        flashCardDao.getAll()&#10;    }&#10;    val getCardById: suspend (Int?) -&gt; FlashCard? = {&#10;        flashCardDao.getCardById(it)&#10;    }&#10;    val deleteCard: suspend (FlashCard) -&gt; Unit = {&#10;        flashCardDao.delete(it)&#10;    }&#10;&#10;    // The startDestination parameter now takes the Routes.Home object directly&#10;    NavHost(navController = navCtrller, startDestination = startDestnt, modifier = modder) {&#10;&#10;        // Use composable&lt;T&gt; for type-safe destinations without arguments&#10;        composable&lt;Routes.Home&gt; {&#10;            HomeScreen(&#10;                // Navigate by passing the destination object&#10;                onNavigateToStudy = { navCtrller.navigate(Routes.Study) },&#10;                onNavigateToAdd = { navCtrller.navigate(Routes.Add) },&#10;                onNavigateToSearch = { navCtrller.navigate(Routes.Search) },&#10;                onMessageChange = onMessageChange&#10;            )&#10;        }&#10;&#10;        composable&lt;Routes.Study&gt; {&#10;            StudyScreen(onMessageChange = onMessageChange)&#10;        }&#10;&#10;        composable&lt;Routes.Add&gt; {&#10;            AddCardScreen(onMessageChange = onMessageChange, insertFlashCard = insertFlashCard)&#10;        }&#10;&#10;        composable&lt;Routes.Search&gt; {&#10;            SearchScreen(&#10;                onSearch = { filters -&gt; navCtrller.navigate(filters) },&#10;                onShowAllCards = { navCtrller.navigate(Routes.SearchResults()) },&#10;                onMessageChange = onMessageChange&#10;            )&#10;        }&#10;&#10;        composable&lt;Routes.SearchResults&gt; { backStackEntry -&gt;&#10;            val args = backStackEntry.toRoute&lt;Routes.SearchResults&gt;()&#10;            SearchResultScreen(&#10;                filters = args,&#10;                performSearch = { filters -&gt;&#10;                    searchFlashCards(flashCardDao, filters)&#10;                },&#10;                deleteCards = { cards -&gt;&#10;                    cards.forEach { card -&gt; deleteCard(card) }&#10;                },&#10;                onNavigateToCard = { cardId -&gt; navCtrller.navigate(Routes.CardDetail(cardId)) },&#10;                onMessageChange = onMessageChange&#10;            )&#10;        }&#10;&#10;        // Use composable&lt;T&gt; for destinations WITH arguments&#10;        composable&lt;Routes.CardDetail&gt; { backStackEntry -&gt;&#10;            // Retrieve the type-safe arguments object&#10;            val args = backStackEntry.toRoute&lt;Routes.CardDetail&gt;()&#10;&#10;            CardDetailScreen(&#10;                getCardById = getCardById,&#10;                updateCard = updateFlashCard,&#10;                //deleteCard = deleteCard,&#10;                cardId = args.cardId, // Access arguments directly&#10;                //onNavigateBack = { navCtrller.popBackStack() },&#10;                onMessageChange = onMessageChange&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;private suspend fun searchFlashCards(&#10;    flashCardDao: FlashCardDao,&#10;    filters: Routes.SearchResults&#10;): List&lt;FlashCard&gt; {&#10;    return if (filters.englishEnabled || filters.vietnameseEnabled) {&#10;        flashCardDao.searchCards(&#10;            englishQuery = filters.englishQuery,&#10;            englishEnabled = filters.englishEnabled,&#10;            englishWholeWord = filters.englishWholeWord,&#10;            vietnameseQuery = filters.vietnameseQuery,&#10;            vietnameseEnabled = filters.vietnameseEnabled,&#10;            vietnameseWholeWord = filters.vietnameseWholeWord&#10;        )&#10;    } else {&#10;        flashCardDao.getAll()&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/annamapp/screens/SearchResultScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/annamapp/screens/SearchResultScreen.kt" />
              <option name="originalContent" value="package com.example.annamapp.screens&#10;&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.unit.dp&#10;import com.example.annamapp.navigation.Routes&#10;import com.example.annamapp.room_sqlite_db.FlashCard&#10;import kotlinx.coroutines.launch&#10;&#10;@Composable&#10;fun SearchResultScreen(&#10;    filters: Routes.SearchResults,&#10;    performSearch: suspend (Routes.SearchResults) -&gt; List&lt;FlashCard&gt;,&#10;    onNavigateToCard: (Int) -&gt; Unit,&#10;    onMessageChange: (String) -&gt; Unit = {}&#10;) {&#10;    var results by remember { mutableStateOf&lt;List&lt;FlashCard&gt;&gt;(emptyList()) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    LaunchedEffect(filters) {&#10;        scope.launch {&#10;            results = performSearch(filters)&#10;            if (results.isEmpty()) {&#10;                onMessageChange(&quot;No cards found&quot;)&#10;            } else {&#10;                onMessageChange(&quot;Tap a card to view details&quot;)&#10;            }&#10;        }&#10;    }&#10;&#10;    Column(&#10;        modifier = Modifier.fillMaxSize().padding(16.dp),&#10;        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        Text(text = &quot;Results&quot;, style = MaterialTheme.typography.titleMedium)&#10;&#10;        if (results.isEmpty()) {&#10;            Text(text = &quot;No cards to show&quot;, modifier = Modifier.padding(top = 24.dp))&#10;        } else {&#10;            LazyColumn(verticalArrangement = Arrangement.spacedBy(8.dp)) {&#10;                items(results, key = { it.uid }) { card -&gt;&#10;                    ResultRow(card = card, onClick = { onNavigateToCard(card.uid) })&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ResultRow(card: FlashCard, onClick: () -&gt; Unit) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth().clickable { onClick() }.padding(12.dp),&#10;        verticalAlignment = Alignment.CenterVertically,&#10;        horizontalArrangement = Arrangement.SpaceBetween&#10;    ) {&#10;        Column(modifier = Modifier.weight(1f)) {&#10;            Text(text = card.englishCard ?: &quot;&quot;, style = MaterialTheme.typography.bodyLarge)&#10;            Text(text = card.vietnameseCard ?: &quot;&quot;, style = MaterialTheme.typography.bodyMedium)&#10;        }&#10;        Button(onClick = onClick) { Text(&quot;View&quot;) }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.annamapp.screens&#10;&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.Arrangement&#10;import androidx.compose.foundation.layout.Column&#10;import androidx.compose.foundation.layout.Row&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.fillMaxWidth&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.Checkbox&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.rememberCoroutineScope&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.unit.dp&#10;import com.example.annamapp.navigation.Routes&#10;import com.example.annamapp.room_sqlite_db.FlashCard&#10;import kotlinx.coroutines.launch&#10;&#10;@Composable&#10;fun SearchResultScreen(&#10;    filters: Routes.SearchResults,&#10;    performSearch: suspend (Routes.SearchResults) -&gt; List&lt;FlashCard&gt;,&#10;    deleteCards: suspend (List&lt;FlashCard&gt;) -&gt; Unit,&#10;    onNavigateToCard: (Int) -&gt; Unit,&#10;    onMessageChange: (String) -&gt; Unit = {}&#10;) {&#10;    var results by remember { mutableStateOf&lt;List&lt;FlashCard&gt;&gt;(emptyList()) }&#10;    var selectedCardIds by remember { mutableStateOf(setOf&lt;Int&gt;()) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    suspend fun refresh() {&#10;        val data = performSearch(filters)&#10;        results = data&#10;        selectedCardIds = emptySet()&#10;        if (data.isEmpty()) {&#10;            onMessageChange(&quot;No cards found&quot;)&#10;        } else {&#10;            onMessageChange(&quot;Tap a card or use Delete to remove selected&quot;)&#10;        }&#10;    }&#10;&#10;    LaunchedEffect(filters) {&#10;        refresh()&#10;    }&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .padding(16.dp),&#10;        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Text(text = &quot;Results&quot;, style = MaterialTheme.typography.titleMedium)&#10;            Button(&#10;                enabled = selectedCardIds.isNotEmpty(),&#10;                onClick = {&#10;                    scope.launch {&#10;                        val toDelete = results.filter { selectedCardIds.contains(it.uid) }&#10;                        if (toDelete.isEmpty()) {&#10;                            onMessageChange(&quot;Select card(s) to delete&quot;)&#10;                            return@launch&#10;                        }&#10;                        deleteCards(toDelete)&#10;                        onMessageChange(&quot;Deleted ${toDelete.size} card(s)&quot;)&#10;                        refresh()&#10;                    }&#10;                }&#10;            ) {&#10;                Text(&quot;Delete&quot;)&#10;            }&#10;        }&#10;&#10;        if (results.isEmpty()) {&#10;            Text(text = &quot;No cards to show&quot;, modifier = Modifier.padding(top = 24.dp))&#10;        } else {&#10;            LazyColumn(verticalArrangement = Arrangement.spacedBy(8.dp)) {&#10;                items(results, key = { it.uid }) { card -&gt;&#10;                    ResultRow(&#10;                        card = card,&#10;                        isSelected = selectedCardIds.contains(card.uid),&#10;                        onSelectionChange = { checked -&gt;&#10;                            selectedCardIds = if (checked) {&#10;                                selectedCardIds + card.uid&#10;                            } else {&#10;                                selectedCardIds - card.uid&#10;                            }&#10;                        },&#10;                        onViewClick = { onNavigateToCard(card.uid) }&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ResultRow(&#10;    card: FlashCard,&#10;    isSelected: Boolean,&#10;    onSelectionChange: (Boolean) -&gt; Unit,&#10;    onViewClick: () -&gt; Unit&#10;) {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(12.dp),&#10;        verticalAlignment = Alignment.CenterVertically,&#10;        horizontalArrangement = Arrangement.SpaceBetween&#10;    ) {&#10;        Checkbox(checked = isSelected, onCheckedChange = onSelectionChange)&#10;&#10;        Column(&#10;            modifier = Modifier&#10;                .weight(1f)&#10;                .padding(horizontal = 12.dp)&#10;        ) {&#10;            Text(text = card.englishCard.orEmpty(), style = MaterialTheme.typography.bodyLarge)&#10;            Text(text = card.vietnameseCard.orEmpty(), style = MaterialTheme.typography.bodyMedium)&#10;        }&#10;&#10;        Button(onClick = onViewClick) {&#10;            Text(&quot;View&quot;)&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>